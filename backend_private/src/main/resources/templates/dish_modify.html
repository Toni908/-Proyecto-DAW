<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit cards</title>
    <link th:href="@{/css/custom.css}" rel="stylesheet"/>
    <link th:href="@{/css/create_dish.css}" rel="stylesheet"/>
    <link th:href="@{/css/form.css}" rel="stylesheet"/>
</head>
<body>
<div th:insert="shared/headerVersion2 :: header"/>

<div class="container my-5">
    <div class="row justify-content-center">
        <a class="col-lg-3 col-md-4 col-sm-6 col-12 my-1 justify-content-center" th:href="@{'/restaurant/admin/category/' + ${plato.categoria.id_categoria} + '/dishes'}">
            <button class="w-100 pt-2 pb-2 paraf_form rounded" value="Editar Platos"> Volver a las Categorias </button>
        </a>
    </div>
</div>

<hr class="w-75 mx-auto">

<main class="d-flex flex-row justify-content-center">

    <div class="form_section w-75 py-5 my-5">
    <form method="post" class="container form_container" th:action="@{'/restaurant/admin/'+ ${plato.categoria.id_categoria} +'/dish/save' }" enctype="multipart/form-data">

        <div class="tittle_form text-center">
            <h1 th:if="${plato.id_plato != null}"> Editar Plato </h1>
            <h1 th:unless="${plato.id_plato != null}"> Crear Plato </h1>
        </div>

        <div class="body_form">
            <div class="container">
                <div class="row justify-content-md-center">
            <div th:if="${plato.id_plato != null}" class="d-flex justify-content-center col-6">
                <div class="mb-3 p-0 text-center" style="width: 100%">
                    <div class="ps-3 paraf_form">Id:</div>
                    <label class="w-100 field_form_principal p-0">
                        <input class="input-text" id="id" name="id" th:value="${plato.id_plato}" type="text" readonly>
                    </label>
                </div>
            </div>

            <div class="d-flex justify-content-center col-6">
                <div class="mb-3 p-0 text-center" style="width: 100%">
                    <div class="ps-3 paraf_form">Nombre del Plato:</div>
                    <label class="w-100 field_form_principal p-0">
                        <input class="input-text" id="name" name="name" th:value="${plato.nombre}" type="text" maxlength="50" required>
                    </label>
                </div>
            </div>


            <div class="d-flex justify-content-center col-6">
                <div class="mb-3 p-0 text-center" style="width: 100%">
                    <div class="ps-3 paraf_form">Precio del Plato:</div>
                    <label class="w-100 field_form_principal p-0">
                        <input type="number" step="0.01" class="input-text" id="precio" name="precio" th:value="${plato.precio}" required>
                    </label>
                </div>
            </div>

            <div class="d-flex justify-content-center col-6">
                <div class="mb-3 p-0 text-center" style="width: 100%">
                    <div class="ps-3 paraf_form">Descripci√≥n del Plato:</div>
                    <label class="w-100 field_form_principal p-0">
                        <textarea class="input-text" id="descripcion" name="descripcion" th:text="${plato.descripcion}" required></textarea>
                    </label>
                </div>
            </div>
                </div>
            </div>

            <div class="tittle_form text-center">
                <h1 class="mt-3">Alergenos del Plato</h1>
            </div>

        <ul>
            <li>
                <input type="checkbox" id="cb1" name="cb1" value="1"/>
                <label for="cb1"><img src="./alergenos/gluten.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb2" name="cb2" value="2"/>
                <label for="cb2"><img src="./alergenos/crustaceos.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb3" name="cb3" value="3"/>
                <label for="cb3"><img src="./alergenos/huevos.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb4" name="cb4" value="4"/>
                <label for="cb4"><img src="./alergenos/pescado.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb5" name="cb5" value="5"/>
                <label for="cb5"><img src="./alergenos/cacahuete.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb6" name="cb6" value="6"/>
                <label for="cb6"><img src="./alergenos/soja.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb7" name="cb7" value="7"/>
                <label for="cb7"><img src="./alergenos/lacteos.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb8" name="cb8" value="8"/>
                <label for="cb8"><img src="./alergenos/frutos_secos.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb9" name="cb9" value="9"/>
                <label for="cb9"><img src="./alergenos/apio.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb10" name="cb10" value="10"/>
                <label for="cb10"><img src="./alergenos/mostaza.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb11" name="cb11" value="11"/>
                <label for="cb11"><img src="./alergenos/sesamo.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb12" name="cb12" value="12"/>
                <label for="cb12"><img src="./alergenos/so2.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb13" name="cb13" value="13"/>
                <label for="cb13"><img src="./alergenos/altramuces.png" class="rounded-3"/></label>
            </li>
            <li>
                <input type="checkbox" id="cb14" name="cb14" value="14"/>
                <label for="cb14"><img src="./alergenos/moluscos.png" class="rounded-3"/></label>
            </li>
        </ul>
           <div class="d-none" th:each="alergeno : ${plato.alergenos}">
               <span  th:id="${alergeno.id_alergeno}" th:text="${alergeno.id_alergeno}"></span>
           </div>

            <div class="pt-3 row d-flex flex-row justify-content-center gap-5">
                <input class="w-20 pt-2 pb-2 paraf_form rounded" type="submit" value="Submit" />
            </div>

        </div>
    </form>

    </div>

</main>


<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script th:src="@{/js/header.js}"></script>

<script>
    $(document).ready(function() {
        for(var x = 1 ; x <= 14 ; x++){
            var myId = document.getElementById(x);
            if(myId){
                var myId = $("#"+x).text();
                var id = "cb" + myId;
                $("#" + id).prop('checked', true);
            }
        }
    });
</script>
</body>
</html>